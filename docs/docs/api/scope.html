<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A sandboxed scripting language for Minecraft event automation">
    <title>Scope Functions â€” Quill</title>
    <link rel="stylesheet" href="https://quill.kmathers.co.uk/docs/quilldocs.css">
</head>

<body>
    <div class="particles" id="particles"></div>

    <div class="layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>
                    <img src="https://raw.githubusercontent.com/KohanMathers/Quill/refs/heads/main/QuillLogo.png"
                        alt="Quill Logo">
                    <a href="../index.html">Quill</a>
                </h2>
                <p class="sidebar-tagline">A sandboxed scripting language for Minecraft event automation</p>
            </div>
            <nav class="sidebar-nav">
                <ul><li class='folder'><span class='folder-name'>advanced</span><ul><li><a href='/docs/advanced/custom-events.html'>Custom Events</a></li><li><a href='/docs/advanced/error-handling.html'>Error Handling</a></li><li><a href='/docs/advanced/persistent-variables.html'>Persistent Variables</a></li><li><a href='/docs/advanced/security.html'>Security</a></li><li><a href='/docs/advanced/subscopes.html'>Subscopes</a></li></ul></li><li class='folder'><span class='folder-name'>api</span><ul><li><a href='/docs/api/constructors.html'>Constructors</a></li><li><a href='/docs/api/player.html'>Player</a></li><li><a href='/docs/api/scope.html' class='active'>Scope</a></li><li><a href='/docs/api/utility.html'>Utility</a></li><li><a href='/docs/api/world.html'>World</a></li></ul></li><li class='folder'><span class='folder-name'>commands</span><ul><li><a href='/docs/commands/general.html'>General</a></li><li><a href='/docs/commands/scope-management.html'>Scope Management</a></li><li><a href='/docs/commands/script-management.html'>Script Management</a></li></ul></li><li><a href='/docs/configuration.html'>Configuration</a></li><li class='folder'><span class='folder-name'>developer</span><ul><li><a href='/docs/developer/api-integration.html'>Api Integration</a></li></ul></li><li class='folder'><span class='folder-name'>events</span><ul><li><a href='/docs/events/block-events.html'>Block Events</a></li><li><a href='/docs/events/entity-events.html'>Entity Events</a></li><li><a href='/docs/events/player-events.html'>Player Events</a></li><li><a href='/docs/events/world-events.html'>World Events</a></li></ul></li><li class='folder'><span class='folder-name'>examples</span><ul><li><a href='/docs/examples/basic-scripts.html'>Basic Scripts</a></li><li><a href='/docs/examples/minigames.html'>Minigames</a></li></ul></li><li><a href='/docs/faq.html'>Faq</a></li><li><a href='/docs/getting-started.html'>Getting Started</a></li><li><a href='/docs/index.html'>Index</a></li><li><a href='/docs/installation.html'>Installation</a></li><li class='folder'><span class='folder-name'>language</span><ul><li><a href='/docs/language/data-types.html'>Data Types</a></li><li><a href='/docs/language/events.html'>Events</a></li><li><a href='/docs/language/functions.html'>Functions</a></li><li><a href='/docs/language/scopes.html'>Scopes</a></li><li><a href='/docs/language/string-interpolation.html'>String Interpolation</a></li><li><a href='/docs/language/syntax.html'>Syntax</a></li></ul></li><li><a href='/docs/quickstart.html'>Quickstart</a></li></ul>
            </nav>
            <div class="sidebar-footer">
                <a class="github-link" href="https://github.com/kohanmathers/quill" target="_blank">
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
                        <path
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
                    </svg>
                    View on GitHub
                </a>
            </div>
        </aside>

        <main class="content">
            <header class="hero hide-hero">
                <img class="hero-logo"
                    src="https://raw.githubusercontent.com/KohanMathers/Quill/refs/heads/main/QuillLogo.png"
                    alt="Quill Logo">
                <h1>Quill</h1>
                <p>A sandboxed scripting language for Minecraft event automation</p>
                <div class="button-group">
                    <a class="ghbutton" href="https://github.com/kohanmathers/quill" target="_blank">View on GitHub</a>
                    <a class="learnmore" href="getting-started.html">Get Started</a>
                </div>
            </header>

            <nav class="breadcrumbs" aria-label="Breadcrumb">
                <a href='../index.html'>Quill</a><span class='separator'>/</span><span>Api</span><span class='separator'>/</span><span class='current'>Scope</span>
            </nav>

            <div class="doc-layout">
                <article class="doc-content">
                    <h1 class="page-title">Scope Functions</h1>
                    <h1 id="scope-functions">Scope Functions</h1>
<h2 id="overview">Overview</h2>
<p>Scope functions allow you to manage player groups, check region boundaries, and manipulate scope properties dynamically. These functions are essential for creating multiplayer systems, region-based mechanics, and managing player permissions within specific areas.</p>
<p>Scopes in Quill represent isolated execution contexts with their own variables, regions, and player lists. Scope functions let you interact with these contexts programmatically, enabling sophisticated multi-region game mechanics and player management systems.</p>
<h2 id="player-management">Player Management</h2>
<h3 id="addtoscope">addtoscope()</h3>
<p>Adds a player to a scope's player list.</p>
<p><strong>Syntax:</strong></p>
<div class="highlight"><pre><span></span><code>addtoscope(player, scope)
</code></pre></div>

<p><strong>Parameters:</strong><br />
- <code>player</code> - Player object to add<br />
- <code>scope</code> - Scope object to add player to</p>
<p><strong>Returns:</strong> <code>true</code> on success</p>
<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Add player to scope</span>
<span class="n">let</span><span class="w"> </span><span class="n">myScope</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">myScope</span><span class="p">)</span>

<span class="c1">// Add on join</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerJoin</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">teamScope</span><span class="p">)</span>
<span class="w">    </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;You&#39;ve joined the team!&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Add player when entering region</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">teamZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">teamScope</span><span class="p">)</span>
<span class="w">        </span><span class="n">broadcast</span><span class="p">(</span><span class="s">&quot;{player.name} joined the team!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Team system</span>
<span class="n">let</span><span class="w"> </span><span class="n">redTeam</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">)</span>
<span class="n">let</span><span class="w"> </span><span class="n">blueTeam</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">)</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;!join red&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">redTeam</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Joined red team!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;!join blue&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">blueTeam</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Joined blue team!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Auto-add based on location</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="nb">move</span><span class="p">.</span><span class="n">to</span><span class="p">,</span><span class="w"> </span><span class="n">safeZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span>!<span class="n">contains</span><span class="p">(</span><span class="n">getplayers</span><span class="p">(</span><span class="n">safeZone</span><span class="p">),</span><span class="w"> </span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">safeZone</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Welcome to the safe zone&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Notes:</strong><br />
- Player is added to scope's internal player list<br />
- Does not teleport or move player<br />
- Player can be in multiple scopes simultaneously<br />
- Used for tracking which players are part of a scope<br />
- Commonly used with <code>getplayers()</code> and <code>removefromscope()</code></p>
<h3 id="removefromscope">removefromscope()</h3>
<p>Removes a player from a scope's player list.</p>
<p><strong>Syntax:</strong></p>
<div class="highlight"><pre><span></span><code>removefromscope(player, scope)
</code></pre></div>

<p><strong>Parameters:</strong><br />
- <code>player</code> - Player object to remove<br />
- <code>scope</code> - Scope object to remove player from</p>
<p><strong>Returns:</strong> <code>true</code> on success</p>
<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">//</span><span class="w"> </span><span class="n">Remove</span><span class="w"> </span><span class="n">player</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">scope</span>
<span class="n">let</span><span class="w"> </span><span class="n">myScope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="n">removefromscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">myScope</span><span class="p">)</span>

<span class="o">//</span><span class="w"> </span><span class="n">Remove</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">quit</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerQuit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">removefromscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">teamScope</span><span class="p">)</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Remove</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">leaving</span><span class="w"> </span><span class="n">region</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">teamZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">removefromscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">teamScope</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;You left the team zone&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Leave</span><span class="w"> </span><span class="n">team</span><span class="w"> </span><span class="n">command</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!leave&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">removefromscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">redTeam</span><span class="p">)</span>
<span class="w">        </span><span class="n">removefromscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">blueTeam</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;You left all teams&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Auto</span><span class="o">-</span><span class="n">remove</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">death</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerDeath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">removefromscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">activeScope</span><span class="p">)</span>
<span class="w">    </span><span class="n">broadcast</span><span class="p">(</span><span class="s2">&quot;{player.name} was removed from the game!&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Cleanup</span><span class="w"> </span><span class="n">system</span>
<span class="k">func</span><span class="w"> </span><span class="n">clearAllPlayers</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getplayers</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">removefromscope</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Notes:</strong><br />
- Only removes player from scope's player list<br />
- Does not teleport or affect player<br />
- Safe to call even if player not in scope<br />
- Does nothing if player not in scope<br />
- Use to clean up when players leave areas or games</p>
<h3 id="getplayers">getplayers()</h3>
<p>Gets all players in a scope's player list.</p>
<p><strong>Syntax:</strong></p>
<div class="highlight"><pre><span></span><code>getplayers(scope)
</code></pre></div>

<p><strong>Parameters:</strong><br />
- <code>scope</code> - Scope object to query</p>
<p><strong>Returns:</strong> List of Player objects</p>
<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">//</span><span class="w"> </span><span class="n">Get</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">scope</span>
<span class="n">let</span><span class="w"> </span><span class="n">myScope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="n">let</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getplayers</span><span class="p">(</span><span class="n">myScope</span><span class="p">)</span>
<span class="nb">log</span><span class="p">(</span><span class="s2">&quot;Players in scope: {len(players)}&quot;</span><span class="p">)</span>

<span class="o">//</span><span class="w"> </span><span class="n">Message</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">scope</span>
<span class="n">let</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getplayers</span><span class="p">(</span><span class="n">teamScope</span><span class="p">)</span>
<span class="k">for</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Team announcement!&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Count</span><span class="w"> </span><span class="n">players</span>
<span class="n">let</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">getplayers</span><span class="p">(</span><span class="n">arenaScope</span><span class="p">))</span>
<span class="n">broadcast</span><span class="p">(</span><span class="s2">&quot;Players in arena: {count}&quot;</span><span class="p">)</span>

<span class="o">//</span><span class="w"> </span><span class="n">Team</span><span class="w"> </span><span class="n">balancing</span>
<span class="k">func</span><span class="w"> </span><span class="n">balanceTeams</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">redPlayers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getplayers</span><span class="p">(</span><span class="n">redTeam</span><span class="p">)</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">bluePlayers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getplayers</span><span class="p">(</span><span class="n">blueTeam</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">redPlayers</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">bluePlayers</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Move</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">player</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">red</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">blue</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">player</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">redPlayers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="n">removefromscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">redTeam</span><span class="p">)</span>
<span class="w">        </span><span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">blueTeam</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Moved to blue team for balance&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Give</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">players</span>
<span class="k">func</span><span class="w"> </span><span class="n">giveToScope</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="p">,</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getplayers</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">player</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">give</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="p">,</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!kit&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">giveToScope</span><span class="p">(</span><span class="n">arenaScope</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;diamond_sword&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">        </span><span class="n">giveToScope</span><span class="p">(</span><span class="n">arenaScope</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;golden_apple&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Heal</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">scope</span>
<span class="k">func</span><span class="w"> </span><span class="n">healScope</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getplayers</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">player</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">heal</span><span class="p">(</span><span class="n">player</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Healed!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">player</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">scope</span>
<span class="k">func</span><span class="w"> </span><span class="n">isInScope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getplayers</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">contains</span><span class="p">(</span><span class="n">players</span><span class="p">,</span><span class="w"> </span><span class="n">player</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">isInScope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">vipScope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">give_effect</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;speed&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Notes:</strong><br />
- Returns empty list if no players in scope<br />
- Returns snapshot of current players<br />
- Does not track players automatically<br />
- Must use <code>addtoscope()</code>/<code>removefromscope()</code> to manage list<br />
- Players in list are not necessarily in scope's region</p>
<h2 id="region-management">Region Management</h2>
<h3 id="in_region">in_region()</h3>
<p>Checks if a player or location is within a scope's region boundaries.</p>
<p><strong>Syntax:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="p">)</span>
<span class="n">in_region</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="p">)</span>
</code></pre></div>

<p><strong>Parameters:</strong><br />
- <code>player</code> - Player object to check<br />
- <code>location</code> - Location object to check<br />
- <code>scope</code> - Scope object with region to check against</p>
<p><strong>Returns:</strong> <code>true</code> if inside region, <code>false</code> otherwise</p>
<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1">// Check if player in region</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">myScope</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">Scope</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="nx">myScope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">log</span><span class="p">(</span><span class="s">&quot;Player is in region&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Check location</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">loc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">location</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">)</span>
<span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">loc</span><span class="p">,</span><span class="w"> </span><span class="nx">myScope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">log</span><span class="p">(</span><span class="s">&quot;Location is in region&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Entry detection</span>
<span class="nx">OnEvent</span><span class="p">(</span><span class="nx">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">move</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="w"> </span><span class="nx">protectedZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">!</span><span class="nx">in_region</span><span class="p">(</span><span class="nx">move</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="w"> </span><span class="nx">protectedZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Entered protected zone!&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nx">addtoscope</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="nx">protectedZone</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Exit detection</span>
<span class="nx">OnEvent</span><span class="p">(</span><span class="nx">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">!</span><span class="nx">in_region</span><span class="p">(</span><span class="nx">move</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="w"> </span><span class="nx">arenaZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">move</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="w"> </span><span class="nx">arenaZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Left the arena!&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nx">removefromscope</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="nx">arenaZone</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Safe zone system</span>
<span class="nx">OnEvent</span><span class="p">(</span><span class="nx">PlayerDamage</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="nx">safeZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">cancel</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="w">        </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;You are safe here&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Building restrictions</span>
<span class="nx">OnEvent</span><span class="p">(</span><span class="nx">BlockPlace</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">block</span><span class="p">.</span><span class="nx">location</span><span class="p">,</span><span class="w"> </span><span class="nx">noBuilding</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">cancel</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="w">        </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;You cannot build here!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Multiple region check</span>
<span class="nx">OnEvent</span><span class="p">(</span><span class="nx">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="nx">redBase</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">give_effect</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;speed&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Speed boost in red base&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="nx">blueBase</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">give_effect</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;regeneration&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Regen boost in blue base&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Region-based spawning</span>
<span class="nx">OnEvent</span><span class="p">(</span><span class="nx">EntitySpawn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">entity</span><span class="p">.</span><span class="nx">location</span><span class="p">,</span><span class="w"> </span><span class="nx">peacefulZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">entity</span><span class="p">.</span><span class="k">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;zombie&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">entity</span><span class="p">.</span><span class="k">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;skeleton&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">remove_entity</span><span class="p">(</span><span class="nx">entity</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Notes:</strong><br />
- Returns <code>false</code> if scope has no region defined<br />
- Checks 3D boundaries (x, y, z)<br />
- Boundary check is inclusive (edges count as inside)<br />
- Works with any location in any world<br />
- Efficient for frequent checks</p>
<h3 id="get_region">get_region()</h3>
<p>Gets a scope's region boundaries.</p>
<p><strong>Syntax:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">get_region</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span>
</code></pre></div>

<p><strong>Parameters:</strong><br />
- <code>scope</code> - Scope object to query</p>
<p><strong>Returns:</strong> Region object with properties: x1, y1, z1, x2, y2, z2, or <code>null</code> if no region</p>
<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">//</span><span class="w"> </span><span class="n">Get</span><span class="w"> </span><span class="n">region</span>
<span class="n">let</span><span class="w"> </span><span class="n">myScope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">myScope</span><span class="p">)</span>

<span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">log</span><span class="p">(</span><span class="s2">&quot;Region: {region.x1}, {region.y1}, {region.z1}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nb">log</span><span class="p">(</span><span class="s2">&quot;     to {region.x2}, {region.y2}, {region.z2}&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Access</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="n">properties</span>
<span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">arenaScope</span><span class="p">)</span>
<span class="n">let</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">x1</span>
<span class="n">let</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y1</span>
<span class="n">let</span><span class="w"> </span><span class="n">depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z1</span>
<span class="nb">log</span><span class="p">(</span><span class="s2">&quot;Arena size: {width}x{height}x{depth}&quot;</span><span class="p">)</span>

<span class="o">//</span><span class="w"> </span><span class="n">Calculate</span><span class="w"> </span><span class="n">center</span>
<span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">myScope</span><span class="p">)</span>
<span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">centerX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">region</span><span class="o">.</span><span class="n">x1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">centerY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">region</span><span class="o">.</span><span class="n">y1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">centerZ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">region</span><span class="o">.</span><span class="n">z1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span>

<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">center</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location</span><span class="p">(</span><span class="n">centerX</span><span class="p">,</span><span class="w"> </span><span class="n">centerY</span><span class="p">,</span><span class="w"> </span><span class="n">centerZ</span><span class="p">)</span>
<span class="w">    </span><span class="nb">log</span><span class="p">(</span><span class="s2">&quot;Center: {center}&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Copy</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">scope</span>
<span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">sourceScope</span><span class="p">)</span>
<span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">newScope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y1</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z1</span><span class="p">,</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y2</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z2</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Display</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="n">info</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!region&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">currentScope</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;No region defined&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Region boundaries:&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;X: {region.x1} to {region.x2}&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Y: {region.y1} to {region.y2}&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Z: {region.z1} to {region.z2}&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Expand</span><span class="w"> </span><span class="n">region</span>
<span class="k">func</span><span class="w"> </span><span class="n">expandRegion</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">amount</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">set_region</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span>
<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">x1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">amount</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">amount</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">amount</span><span class="p">,</span>
<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amount</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amount</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">amount</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">regions</span><span class="w"> </span><span class="n">overlap</span>
<span class="k">func</span><span class="w"> </span><span class="n">regionsOverlap</span><span class="p">(</span><span class="n">scope1</span><span class="p">,</span><span class="w"> </span><span class="n">scope2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">scope1</span><span class="p">)</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">scope2</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="bp">false</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">r1</span><span class="o">.</span><span class="n">x1</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">r2</span><span class="o">.</span><span class="n">x2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">r1</span><span class="o">.</span><span class="n">x2</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">r2</span><span class="o">.</span><span class="n">x1</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">           </span><span class="n">r1</span><span class="o">.</span><span class="n">y1</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">r2</span><span class="o">.</span><span class="n">y2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">r1</span><span class="o">.</span><span class="n">y2</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">r2</span><span class="o">.</span><span class="n">y1</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">           </span><span class="n">r1</span><span class="o">.</span><span class="n">z1</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">r2</span><span class="o">.</span><span class="n">z2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">r1</span><span class="o">.</span><span class="n">z2</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">r2</span><span class="o">.</span><span class="n">z1</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Notes:</strong><br />
- Returns <code>null</code> if scope has no region<br />
- Region coordinates are always in min-max format (x1 &lt; x2, etc.)<br />
- Region object properties: x1, y1, z1, x2, y2, z2<br />
- Use with <code>set_region()</code> to modify boundaries<br />
- Region is 3D rectangular area</p>
<h3 id="set_region">set_region()</h3>
<p>Sets a scope's region boundaries.</p>
<p><strong>Syntax:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">set_region</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">y1</span><span class="p">,</span><span class="w"> </span><span class="n">z1</span><span class="p">,</span><span class="w"> </span><span class="n">x2</span><span class="p">,</span><span class="w"> </span><span class="n">y2</span><span class="p">,</span><span class="w"> </span><span class="n">z2</span><span class="p">)</span>
</code></pre></div>

<p><strong>Parameters:</strong><br />
- <code>scope</code> - Scope object to modify<br />
- <code>x1, y1, z1</code> - First corner coordinates<br />
- <code>x2, y2, z2</code> - Opposite corner coordinates</p>
<p><strong>Returns:</strong> <code>true</code> on success</p>
<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">//</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">region</span>
<span class="n">let</span><span class="w"> </span><span class="n">myScope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="n">set_region</span><span class="p">(</span><span class="n">myScope</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">)</span>

<span class="o">//</span><span class="w"> </span><span class="n">Expand</span><span class="w"> </span><span class="n">region</span>
<span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">arenaScope</span><span class="p">)</span>
<span class="n">set_region</span><span class="p">(</span><span class="n">arenaScope</span><span class="p">,</span>
<span class="w">    </span><span class="n">region</span><span class="o">.</span><span class="n">x1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y1</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">    </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y2</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">10</span>
<span class="p">)</span>

<span class="o">//</span><span class="w"> </span><span class="n">Move</span><span class="w"> </span><span class="n">region</span>
<span class="k">func</span><span class="w"> </span><span class="n">moveRegion</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">offsetX</span><span class="p">,</span><span class="w"> </span><span class="n">offsetY</span><span class="p">,</span><span class="w"> </span><span class="n">offsetZ</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">set_region</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span>
<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">x1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offsetX</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offsetY</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offsetZ</span><span class="p">,</span>
<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offsetX</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offsetY</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offsetZ</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">player</span><span class="w"> </span><span class="n">location</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!setregion&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">is_op</span><span class="p">(</span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">let</span><span class="w"> </span><span class="n">loc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">player</span><span class="o">.</span><span class="n">location</span>
<span class="w">            </span><span class="n">set_region</span><span class="p">(</span><span class="n">dynamicScope</span><span class="p">,</span>
<span class="w">                </span><span class="n">loc</span><span class="o">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="n">loc</span><span class="o">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">loc</span><span class="o">.</span><span class="n">z</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span>
<span class="w">                </span><span class="n">loc</span><span class="o">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="n">loc</span><span class="o">.</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">loc</span><span class="o">.</span><span class="n">z</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">50</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Region set around you&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Shrinking</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="n">game</span>
<span class="n">let</span><span class="w"> </span><span class="n">shrinkAmount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>
<span class="n">let</span><span class="w"> </span><span class="n">gameScope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>

<span class="k">func</span><span class="w"> </span><span class="n">shrinkRegion</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">gameScope</span><span class="p">)</span>

<span class="w">    </span><span class="n">set_region</span><span class="p">(</span><span class="n">gameScope</span><span class="p">,</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">x1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">shrinkAmount</span><span class="p">,</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">y1</span><span class="p">,</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">z1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">shrinkAmount</span><span class="p">,</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">shrinkAmount</span><span class="p">,</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">y2</span><span class="p">,</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">z2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">shrinkAmount</span>
<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="n">broadcast</span><span class="p">(</span><span class="s2">&quot;Safe zone shrinking!&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Damage</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="n">outside</span><span class="w"> </span><span class="n">region</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">gameScope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">give_effect</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;wither&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Return to safe zone!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Dynamic</span><span class="w"> </span><span class="n">boundary</span><span class="w"> </span><span class="n">adjustment</span>
<span class="k">func</span><span class="w"> </span><span class="n">adjustRegionHeight</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span><span class="w"> </span><span class="n">newY1</span><span class="p">,</span><span class="w"> </span><span class="n">newY2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">set_region</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span>
<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">newY1</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z1</span><span class="p">,</span>
<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="p">,</span><span class="w"> </span><span class="n">newY2</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z2</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Create</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="n">points</span>
<span class="n">let</span><span class="w"> </span><span class="n">point1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span>
<span class="n">let</span><span class="w"> </span><span class="n">point2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!point1&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">point1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">player</span><span class="o">.</span><span class="n">location</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Point 1 set&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!point2&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">point2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">player</span><span class="o">.</span><span class="n">location</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Point 2 set&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!createregion&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">point1</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">point2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">set_region</span><span class="p">(</span><span class="n">customScope</span><span class="p">,</span>
<span class="w">                </span><span class="n">point1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">point1</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">point1</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
<span class="w">                </span><span class="n">point2</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">point2</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">point2</span><span class="o">.</span><span class="n">z</span>
<span class="w">            </span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Region created!&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">point1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span>
<span class="w">            </span><span class="n">point2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb nb-Type">null</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>Notes:</strong><br />
- Coordinates automatically normalized (min to max)<br />
- Order of corners doesn't matter<br />
- Region is always rectangular<br />
- Updates existing region<br />
- Does not affect players in scope's player list</p>
<h2 id="scope-properties">Scope Properties</h2>
<h3 id="accessing-scope-properties">Accessing Scope Properties</h3>
<p>Scopes have properties that can be accessed using dot notation.</p>
<p><strong>Available Properties:</strong><br />
- <code>scope.players</code> - List of Player objects in scope<br />
- <code>scope.region</code> - Region object (or null)</p>
<p><strong>Examples:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">//</span><span class="w"> </span><span class="n">Access</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="n">directly</span>
<span class="n">let</span><span class="w"> </span><span class="n">myScope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">myScope</span><span class="p">)</span>

<span class="k">for</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">myScope</span><span class="o">.</span><span class="n">players</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Hello from scope!&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Access</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="n">directly</span>
<span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myScope</span><span class="o">.</span><span class="n">region</span>
<span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">log</span><span class="p">(</span><span class="s2">&quot;Region X: {region.x1} to {region.x2}&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Count</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">property</span>
<span class="n">let</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">myScope</span><span class="o">.</span><span class="n">players</span><span class="p">)</span>
<span class="n">broadcast</span><span class="p">(</span><span class="s2">&quot;Players in scope: {count}&quot;</span><span class="p">)</span>

<span class="o">//</span><span class="w"> </span><span class="n">Check</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">player</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">scope</span><span class="w"> </span><span class="n">list</span>
<span class="k">func</span><span class="w"> </span><span class="n">playerInScope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">scope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">contains</span><span class="p">(</span><span class="n">scope</span><span class="o">.</span><span class="n">players</span><span class="p">,</span><span class="w"> </span><span class="n">player</span><span class="p">)</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Get</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">player</span><span class="w"> </span><span class="n">names</span>
<span class="n">let</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="k">for</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">teamScope</span><span class="o">.</span><span class="n">players</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">append</span><span class="p">(</span><span class="n">names</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">let</span><span class="w"> </span><span class="n">nameList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">join</span><span class="p">(</span><span class="n">names</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;, &quot;</span><span class="p">)</span>
<span class="n">broadcast</span><span class="p">(</span><span class="s2">&quot;Team: {nameList}&quot;</span><span class="p">)</span>
</code></pre></div>

<p><strong>Notes:</strong><br />
- <code>scope.players</code> is equivalent to <code>getplayers(scope)</code><br />
- <code>scope.region</code> is equivalent to <code>get_region(scope)</code><br />
- Properties are read-only from scope object<br />
- Use functions to modify scope state</p>
<h2 id="examples">Examples</h2>
<h3 id="team-system">Team System</h3>
<p><strong>Basic team management:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">redTeam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">Scope</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">50</span><span class="p">)</span>
<span class="n">let</span><span class="w"> </span><span class="n">blueTeam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">Scope</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;!join red&quot;</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Remove</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">team</span>
<span class="w">        </span><span class="n">removefromscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">blueTeam</span><span class="p">)</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="k">Add</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">red</span><span class="w"> </span><span class="n">team</span>
<span class="w">        </span><span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">redTeam</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Joined red team!&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Teleport</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">base</span>
<span class="w">        </span><span class="n">teleport</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">75</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">75</span><span class="p">)</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;!join blue&quot;</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">removefromscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">redTeam</span><span class="p">)</span>
<span class="w">        </span><span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">blueTeam</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Joined blue team!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="n">teleport</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="mi">75</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">75</span><span class="p">)</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;!teams&quot;</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">redCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">len</span><span class="p">(</span><span class="n">getplayers</span><span class="p">(</span><span class="n">redTeam</span><span class="p">))</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">blueCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">len</span><span class="p">(</span><span class="n">getplayers</span><span class="p">(</span><span class="n">blueTeam</span><span class="p">))</span>

<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Red team: {redCount} players&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Blue team: {blueCount} players&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Team</span><span class="w"> </span><span class="n">chat</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="k">contains</span><span class="p">(</span><span class="n">getplayers</span><span class="p">(</span><span class="n">redTeam</span><span class="p">),</span><span class="w"> </span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getplayers</span><span class="p">(</span><span class="n">redTeam</span><span class="p">)</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;[Red] {player.name}: {chat.message}&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="k">contains</span><span class="p">(</span><span class="n">getplayers</span><span class="p">(</span><span class="n">blueTeam</span><span class="p">),</span><span class="w"> </span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getplayers</span><span class="p">(</span><span class="n">blueTeam</span><span class="p">)</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;[Blue] {player.name}: {chat.message}&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</code></pre></div>

<p><strong>Team base protection:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">OnEvent</span><span class="p">(</span><span class="n">BlockBreak</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">block</span><span class="p">.</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">redTeam</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">contains</span><span class="p">(</span><span class="n">getplayers</span><span class="p">(</span><span class="n">redTeam</span><span class="p">),</span><span class="w"> </span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">cancel</span><span class="p">(</span><span class="k">event</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Cannot break blocks in enemy base!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">block</span><span class="p">.</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">blueTeam</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">contains</span><span class="p">(</span><span class="n">getplayers</span><span class="p">(</span><span class="n">blueTeam</span><span class="p">),</span><span class="w"> </span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">cancel</span><span class="p">(</span><span class="k">event</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Cannot break blocks in enemy base!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Team-only entry</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">to</span><span class="p">,</span><span class="w"> </span><span class="n">redTeam</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">contains</span><span class="p">(</span><span class="n">getplayers</span><span class="p">(</span><span class="n">redTeam</span><span class="p">),</span><span class="w"> </span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">teleport</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">move</span><span class="p">.</span><span class="n">from</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Red team base only!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">to</span><span class="p">,</span><span class="w"> </span><span class="n">blueTeam</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">contains</span><span class="p">(</span><span class="n">getplayers</span><span class="p">(</span><span class="n">blueTeam</span><span class="p">),</span><span class="w"> </span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">teleport</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">move</span><span class="p">.</span><span class="n">from</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Blue team base only!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="safe-zone-system">Safe Zone System</h3>
<p><strong>Protected area with entry/exit:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">safeZone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="o">-</span><span class="mh">50</span><span class="p">,</span><span class="w"> </span><span class="mh">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">50</span><span class="p">,</span><span class="w"> </span><span class="mh">50</span><span class="p">,</span><span class="w"> </span><span class="mh">80</span><span class="p">,</span><span class="w"> </span><span class="mh">50</span><span class="p">)</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Entry</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">to</span><span class="p">,</span><span class="w"> </span><span class="n">safeZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">from</span><span class="p">,</span><span class="w"> </span><span class="n">safeZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">safeZone</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Entered safe zone&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PvP disabled&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Exit</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">to</span><span class="p">,</span><span class="w"> </span><span class="n">safeZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">from</span><span class="p">,</span><span class="w"> </span><span class="n">safeZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">removefromscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">safeZone</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Left safe zone&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PvP enabled&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Prevent damage in safe zone</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerDamage</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">contains</span><span class="p">(</span><span class="n">getplayers</span><span class="p">(</span><span class="n">safeZone</span><span class="p">),</span><span class="w"> </span><span class="n">damage</span><span class="p">.</span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cancel</span><span class="p">(</span><span class="k">event</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Show safe zone status</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;!safezone&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">safeZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;You are in the safe zone&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="n">let</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getplayers</span><span class="p">(</span><span class="n">safeZone</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Players here: {len(players)}&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;You are not in the safe zone&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="battle-royale-zone">Battle Royale Zone</h3>
<p><strong>Shrinking playable area:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">gameZone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="o">-</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">)</span>
<span class="n">let</span><span class="w"> </span><span class="n">gameActive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">false</span>
<span class="n">let</span><span class="w"> </span><span class="n">shrinkInterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!start&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">is_op</span><span class="p">(</span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">gameActive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">true</span>
<span class="w">            </span><span class="n">broadcast</span><span class="p">(</span><span class="s2">&quot;Battle Royale started!&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">broadcast</span><span class="p">(</span><span class="s2">&quot;Stay in the zone!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Periodic</span><span class="w"> </span><span class="n">shrinking</span>
<span class="k">func</span><span class="w"> </span><span class="n">tickGame</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">gameActive</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">shrinkInterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shrinkInterval</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">shrinkInterval</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">Every</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">seconds</span>
<span class="w">        </span><span class="n">shrinkInterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">gameZone</span><span class="p">)</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">shrink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>

<span class="w">        </span><span class="n">set_region</span><span class="p">(</span><span class="n">gameZone</span><span class="p">,</span>
<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">x1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">shrink</span><span class="p">,</span>
<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">y1</span><span class="p">,</span>
<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">z1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">shrink</span><span class="p">,</span>
<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">shrink</span><span class="p">,</span>
<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">y2</span><span class="p">,</span>
<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">z2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">shrink</span>
<span class="w">        </span><span class="p">)</span>

<span class="w">        </span><span class="n">broadcast</span><span class="p">(</span><span class="s2">&quot;Zone shrinking!&quot;</span><span class="p">)</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">Show</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">size</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">newRegion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">gameZone</span><span class="p">)</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newRegion</span><span class="o">.</span><span class="n">x2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">newRegion</span><span class="o">.</span><span class="n">x1</span>
<span class="w">        </span><span class="n">broadcast</span><span class="p">(</span><span class="s2">&quot;Zone size: {width}x{width}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Damage</span><span class="w"> </span><span class="n">outside</span><span class="w"> </span><span class="n">zone</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">gameActive</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">gameZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">give_effect</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;wither&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Return to the zone!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Display</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">zone</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!zone&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">gameActive</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">gameZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;You are in the zone&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">gameZone</span><span class="p">)</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">centerX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">region</span><span class="o">.</span><span class="n">x1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">centerZ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">region</span><span class="o">.</span><span class="n">z1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span>

<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">dist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">distance</span><span class="p">(</span>
<span class="w">                    </span><span class="n">player</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">player</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">player</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
<span class="w">                    </span><span class="n">centerX</span><span class="p">,</span><span class="w"> </span><span class="n">player</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">centerZ</span>
<span class="w">                </span><span class="p">)</span>

<span class="w">                </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Distance to zone: {round(dist)} blocks&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="dynamic-region-events">Dynamic Region Events</h3>
<p><strong>Moving danger zone:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">dangerZone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">)</span>
<span class="n">let</span><span class="w"> </span><span class="n">moveDirection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>

<span class="k">func</span><span class="w"> </span><span class="n">moveDangerZone</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">dangerZone</span><span class="p">)</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Move</span><span class="w"> </span><span class="n">region</span>
<span class="w">    </span><span class="n">set_region</span><span class="p">(</span><span class="n">dangerZone</span><span class="p">,</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">x1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">moveDirection</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">5</span><span class="p">),</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">y1</span><span class="p">,</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">z1</span><span class="p">,</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">moveDirection</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">5</span><span class="p">),</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">y2</span><span class="p">,</span>
<span class="w">        </span><span class="n">region</span><span class="o">.</span><span class="n">z2</span>
<span class="w">    </span><span class="p">)</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Reverse</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">boundaries</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">moveDirection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">x1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="o">-</span><span class="mi">200</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">moveDirection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">broadcast</span><span class="p">(</span><span class="s2">&quot;Danger zone moved!&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">dangerZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">give_effect</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;poison&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;You&#39;re in the danger zone!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="multi-region-player-tracking">Multi-Region Player Tracking</h3>
<p><strong>Track which regions player enters:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">zones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">spawn:</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="o">-</span><span class="mh">20</span><span class="p">,</span><span class="w"> </span><span class="mh">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">20</span><span class="p">,</span><span class="w"> </span><span class="mh">20</span><span class="p">,</span><span class="w"> </span><span class="mh">80</span><span class="p">,</span><span class="w"> </span><span class="mh">20</span><span class="p">),</span>
<span class="w">    </span><span class="nl">shop:</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mh">100</span><span class="p">,</span><span class="w"> </span><span class="mh">60</span><span class="p">,</span><span class="w"> </span><span class="mh">100</span><span class="p">,</span><span class="w"> </span><span class="mh">120</span><span class="p">,</span><span class="w"> </span><span class="mh">80</span><span class="p">,</span><span class="w"> </span><span class="mh">120</span><span class="p">),</span>
<span class="w">    </span><span class="nl">arena:</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="o">-</span><span class="mh">100</span><span class="p">,</span><span class="w"> </span><span class="mh">60</span><span class="p">,</span><span class="w"> </span><span class="mh">100</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">80</span><span class="p">,</span><span class="w"> </span><span class="mh">80</span><span class="p">,</span><span class="w"> </span><span class="mh">120</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">let</span><span class="w"> </span><span class="n">playerZones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">currentZones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>

<span class="w">    </span><span class="c1">// Check all zones</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">zones</span><span class="p">.</span><span class="n">spawn</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">append</span><span class="p">(</span><span class="n">currentZones</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;spawn&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">zones</span><span class="p">.</span><span class="n">shop</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">append</span><span class="p">(</span><span class="n">currentZones</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;shop&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">zones</span><span class="p">.</span><span class="n">arena</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">append</span><span class="p">(</span><span class="n">currentZones</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;arena&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Compare with previous zones</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">previousZones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">playerZones</span><span class="p">[</span><span class="n">player</span><span class="p">.</span><span class="n">name</span><span class="p">]</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">previousZones</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">previousZones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Check for new zones entered</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">currentZones</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">contains</span><span class="p">(</span><span class="n">previousZones</span><span class="p">,</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Entered {zone}&quot;</span><span class="p">)</span>

<span class="w">            </span><span class="c1">// Zone-specific actions</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;spawn&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">heal</span><span class="p">(</span><span class="n">player</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;shop&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Welcome to the shop!&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;arena&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Prepare for battle!&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Check for zones exited</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">previousZones</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">contains</span><span class="p">(</span><span class="n">currentZones</span><span class="p">,</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Left {zone}&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Update player zones</span>
<span class="w">    </span><span class="n">playerZones</span><span class="p">[</span><span class="n">player</span><span class="p">.</span><span class="n">name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">currentZones</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="permission-based-scope-access">Permission-Based Scope Access</h3>
<p><strong>Role-based region access:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">vipZone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mh">200</span><span class="p">,</span><span class="w"> </span><span class="mh">60</span><span class="p">,</span><span class="w"> </span><span class="mh">200</span><span class="p">,</span><span class="w"> </span><span class="mh">250</span><span class="p">,</span><span class="w"> </span><span class="mh">80</span><span class="p">,</span><span class="w"> </span><span class="mh">250</span><span class="p">)</span>
<span class="n">let</span><span class="w"> </span><span class="n">adminZone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mh">300</span><span class="p">,</span><span class="w"> </span><span class="mh">60</span><span class="p">,</span><span class="w"> </span><span class="mh">300</span><span class="p">,</span><span class="w"> </span><span class="mh">350</span><span class="p">,</span><span class="w"> </span><span class="mh">80</span><span class="p">,</span><span class="w"> </span><span class="mh">350</span><span class="p">)</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// VIP zone</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">to</span><span class="p">,</span><span class="w"> </span><span class="n">vipZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">player</span><span class="p">.</span><span class="n">hasPermission</span><span class="p">(</span><span class="s">&quot;quill.vip&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">teleport</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">move</span><span class="p">.</span><span class="n">from</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;VIP access required!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Admin zone</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">to</span><span class="p">,</span><span class="w"> </span><span class="n">adminZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">is_op</span><span class="p">(</span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">teleport</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">move</span><span class="p">.</span><span class="n">from</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Admin access required!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// VIP benefits in zone</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">vipZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">give_effect</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;speed&quot;</span><span class="p">,</span><span class="w"> </span><span class="mh">40</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span><span class="p">)</span>
<span class="w">        </span><span class="n">give_effect</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;regeneration&quot;</span><span class="p">,</span><span class="w"> </span><span class="mh">40</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="region-based-game-modes">Region-Based Game Modes</h3>
<p><strong>Different rules in different regions:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">pvpZone</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">Scope</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">buildZone</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">Scope</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">miningZone</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">Scope</span><span class="p">(</span><span class="o">-</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">200</span><span class="p">)</span>

<span class="c1">// PvP zone</span>
<span class="nx">OnEvent</span><span class="p">(</span><span class="nx">PlayerDamage</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">damage</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span><span class="w"> </span><span class="nx">pvpZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Allow PvP</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Cancel PvP outside zone</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">damage</span><span class="p">.</span><span class="nx">source</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nx">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">damage</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="k">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;player&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">cancel</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="w">                </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;PvP only in PvP zone!&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Build zone</span>
<span class="nx">OnEvent</span><span class="p">(</span><span class="nx">BlockPlace</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">!</span><span class="nx">in_region</span><span class="p">(</span><span class="nx">block</span><span class="p">.</span><span class="nx">location</span><span class="p">,</span><span class="w"> </span><span class="nx">buildZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">cancel</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="w">        </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Build in the build zone!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Mining zone - bonus drops</span>
<span class="nx">OnEvent</span><span class="p">(</span><span class="nx">BlockBreak</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">block</span><span class="p">.</span><span class="nx">location</span><span class="p">,</span><span class="w"> </span><span class="nx">miningZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">block</span><span class="p">.</span><span class="k">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;coal_ore&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">give</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;coal&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">            </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bonus coal in mining zone!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">block</span><span class="p">.</span><span class="k">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;iron_ore&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">give</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;iron_ingot&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">            </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bonus iron in mining zone!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Zone announcements</span>
<span class="nx">OnEvent</span><span class="p">(</span><span class="nx">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Entering PvP zone</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">move</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="w"> </span><span class="nx">pvpZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">!</span><span class="nx">in_region</span><span class="p">(</span><span class="nx">move</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="w"> </span><span class="nx">pvpZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Entered PvP zone - Watch out!&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nx">give_effect</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;strength&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Entering build zone</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">move</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="w"> </span><span class="nx">buildZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">!</span><span class="nx">in_region</span><span class="p">(</span><span class="nx">move</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="w"> </span><span class="nx">buildZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Entered build zone - Build freely!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Entering mining zone</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">in_region</span><span class="p">(</span><span class="nx">move</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span><span class="w"> </span><span class="nx">miningZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">!</span><span class="nx">in_region</span><span class="p">(</span><span class="nx">move</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span><span class="w"> </span><span class="nx">miningZone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">sendmessage</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Entered mining zone - Bonus drops!&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="nx">give_effect</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;haste&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="scope-based-inventory-management">Scope-Based Inventory Management</h3>
<p><strong>Save/restore items per scope:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">arenaScope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mh">0</span><span class="p">,</span><span class="w"> </span><span class="mh">60</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">,</span><span class="w"> </span><span class="mh">100</span><span class="p">,</span><span class="w"> </span><span class="mh">80</span><span class="p">,</span><span class="w"> </span><span class="mh">100</span><span class="p">)</span>
<span class="n">let</span><span class="w"> </span><span class="n">savedInventories</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Entering arena</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">to</span><span class="p">,</span><span class="w"> </span><span class="n">arenaScope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">from</span><span class="p">,</span><span class="w"> </span><span class="n">arenaScope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Save inventory (conceptual)</span>
<span class="w">            </span><span class="n">savedInventories</span><span class="p">[</span><span class="n">player</span><span class="p">.</span><span class="n">name</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;inventory_data&quot;</span>

<span class="w">            </span><span class="c1">// Clear inventory and give kit</span>
<span class="w">            </span><span class="c1">// Note: Would need inventory manipulation functions</span>
<span class="w">            </span><span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">arenaScope</span><span class="p">)</span>

<span class="w">            </span><span class="n">give</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;diamond_sword&quot;</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span><span class="p">)</span>
<span class="w">            </span><span class="n">give</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;golden_apple&quot;</span><span class="p">,</span><span class="w"> </span><span class="mh">5</span><span class="p">)</span>
<span class="w">            </span><span class="n">give</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;iron_helmet&quot;</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span><span class="p">)</span>

<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Arena kit given!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Leaving arena</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">to</span><span class="p">,</span><span class="w"> </span><span class="n">arenaScope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">from</span><span class="p">,</span><span class="w"> </span><span class="n">arenaScope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Restore inventory (conceptual)</span>
<span class="w">            </span><span class="n">removefromscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">arenaScope</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Inventory restored!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="nested-scopes">Nested Scopes</h3>
<p><strong>Scopes within scopes:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">cityScope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="o">-</span><span class="mh">200</span><span class="p">,</span><span class="w"> </span><span class="mh">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">200</span><span class="p">,</span><span class="w"> </span><span class="mh">200</span><span class="p">,</span><span class="w"> </span><span class="mh">100</span><span class="p">,</span><span class="w"> </span><span class="mh">200</span><span class="p">)</span>
<span class="n">let</span><span class="w"> </span><span class="n">marketDistrict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="o">-</span><span class="mh">50</span><span class="p">,</span><span class="w"> </span><span class="mh">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">50</span><span class="p">,</span><span class="w"> </span><span class="mh">50</span><span class="p">,</span><span class="w"> </span><span class="mh">80</span><span class="p">,</span><span class="w"> </span><span class="mh">50</span><span class="p">)</span>
<span class="n">let</span><span class="w"> </span><span class="n">residentialDistrict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mh">60</span><span class="p">,</span><span class="w"> </span><span class="mh">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">50</span><span class="p">,</span><span class="w"> </span><span class="mh">150</span><span class="p">,</span><span class="w"> </span><span class="mh">80</span><span class="p">,</span><span class="w"> </span><span class="mh">50</span><span class="p">)</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// City-wide effects</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">cityScope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// No monster spawns in city</span>
<span class="w">        </span><span class="c1">// (Would be handled in EntitySpawn event)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Market district</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">marketDistrict</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">from</span><span class="p">,</span><span class="w"> </span><span class="n">marketDistrict</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Welcome to the Market District&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Type !shop to browse items&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Residential district</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">residentialDistrict</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">from</span><span class="p">,</span><span class="w"> </span><span class="n">residentialDistrict</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Entered Residential District&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Please respect private property&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Building permissions</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">BlockPlace</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">block</span><span class="p">.</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">marketDistrict</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cancel</span><span class="p">(</span><span class="k">event</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Cannot build in market district!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">block</span><span class="p">.</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">residentialDistrict</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Check if player owns plot (conceptual)</span>
<span class="w">        </span><span class="n">cancel</span><span class="p">(</span><span class="k">event</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;You don&#39;t own this plot!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="quest-system">Quest System</h3>
<p><strong>Region-based quest tracking:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">questZones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nl">forest</span><span class="p">:</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">Scope</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">),</span>
<span class="w">    </span><span class="nl">cave</span><span class="p">:</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">Scope</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">),</span>
<span class="w">    </span><span class="nl">mountain</span><span class="p">:</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">Scope</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">100</span><span class="p">)</span>
<span class="err">}</span>

<span class="n">let</span><span class="w"> </span><span class="n">playerQuests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span>

<span class="n">func</span><span class="w"> </span><span class="n">giveQuest</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">questName</span><span class="p">,</span><span class="w"> </span><span class="k">zone</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">playerQuests</span><span class="o">[</span><span class="n">player.name</span><span class="o">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">playerQuests</span><span class="o">[</span><span class="n">player.name</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="n">playerQuests</span><span class="o">[</span><span class="n">player.name</span><span class="o">][</span><span class="n">questName</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">zone</span><span class="err">:</span><span class="w"> </span><span class="k">zone</span><span class="p">,</span>
<span class="w">        </span><span class="nl">progress</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nl">required</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Quest started: {questName}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Go to the quest zone!&quot;</span><span class="p">)</span>
<span class="err">}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">BlockBreak</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">quests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">playerQuests</span><span class="o">[</span><span class="n">player.name</span><span class="o">]</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">quests</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">return</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Forest</span><span class="w"> </span><span class="n">quest</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">break</span><span class="w"> </span><span class="n">logs</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">block</span><span class="p">.</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">questZones</span><span class="p">.</span><span class="n">forest</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">quests</span><span class="o">[</span><span class="n">&quot;Lumberjack&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">block</span><span class="p">.</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;oak_log&quot;</span><span class="w"> </span><span class="err">{</span>
<span class="w">                </span><span class="n">quests</span><span class="o">[</span><span class="n">&quot;Lumberjack&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quests</span><span class="o">[</span><span class="n">&quot;Lumberjack&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">progress</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>

<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quests</span><span class="o">[</span><span class="n">&quot;Lumberjack&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">progress</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quests</span><span class="o">[</span><span class="n">&quot;Lumberjack&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">required</span>

<span class="w">                </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Progress: {progress}/{required}&quot;</span><span class="p">)</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="err">{</span>
<span class="w">                    </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Quest complete!&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="n">give</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;diamond&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">                    </span><span class="n">playerQuests</span><span class="o">[</span><span class="n">player.name</span><span class="o">][</span><span class="n">&quot;Lumberjack&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span>
<span class="w">                </span><span class="err">}</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Cave</span><span class="w"> </span><span class="n">quest</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">mine</span><span class="w"> </span><span class="n">ores</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">block</span><span class="p">.</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">questZones</span><span class="p">.</span><span class="n">cave</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">quests</span><span class="o">[</span><span class="n">&quot;Miner&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">block</span><span class="p">.</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;iron_ore&quot;</span><span class="w"> </span><span class="err">{</span>
<span class="w">                </span><span class="n">quests</span><span class="o">[</span><span class="n">&quot;Miner&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quests</span><span class="o">[</span><span class="n">&quot;Miner&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">progress</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>

<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quests</span><span class="o">[</span><span class="n">&quot;Miner&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">progress</span>
<span class="w">                </span><span class="n">let</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quests</span><span class="o">[</span><span class="n">&quot;Miner&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">required</span>

<span class="w">                </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Progress: {progress}/{required}&quot;</span><span class="p">)</span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">progress</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="err">{</span>
<span class="w">                    </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Quest complete!&quot;</span><span class="p">)</span>
<span class="w">                    </span><span class="n">give</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;diamond_pickaxe&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">                    </span><span class="n">playerQuests</span><span class="o">[</span><span class="n">player.name</span><span class="o">][</span><span class="n">&quot;Miner&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span>
<span class="w">                </span><span class="err">}</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;!quest forest&quot;</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">giveQuest</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Lumberjack&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">questZones</span><span class="p">.</span><span class="n">forest</span><span class="p">)</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;!quest cave&quot;</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">giveQuest</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Miner&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">questZones</span><span class="p">.</span><span class="n">cave</span><span class="p">)</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</code></pre></div>

<h3 id="advanced-region-system">Advanced Region System</h3>
<p><strong>Dynamic region creation and management:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">regions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span>
<span class="n">let</span><span class="w"> </span><span class="n">regionCounter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>

<span class="k">func</span><span class="w"> </span><span class="n">createRegion</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">y1</span><span class="p">,</span><span class="w"> </span><span class="n">z1</span><span class="p">,</span><span class="w"> </span><span class="n">x2</span><span class="p">,</span><span class="w"> </span><span class="n">y2</span><span class="p">,</span><span class="w"> </span><span class="n">z2</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">y1</span><span class="p">,</span><span class="w"> </span><span class="n">z1</span><span class="p">,</span><span class="w"> </span><span class="n">x2</span><span class="p">,</span><span class="w"> </span><span class="n">y2</span><span class="p">,</span><span class="w"> </span><span class="n">z2</span><span class="p">)</span>

<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">regionData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">scope</span><span class="p">:</span><span class="w"> </span><span class="n">region</span><span class="p">,</span>
<span class="w">        </span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p">,</span>
<span class="w">        </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">regionCounter</span><span class="p">,</span>
<span class="w">        </span><span class="n">owner</span><span class="p">:</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="w">        </span><span class="n">flags</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">pvp</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span><span class="p">,</span>
<span class="w">            </span><span class="n">build</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="p">,</span>
<span class="w">            </span><span class="n">mobSpawn</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">append</span><span class="p">(</span><span class="n">regions</span><span class="p">,</span><span class="w"> </span><span class="n">regionData</span><span class="p">)</span>
<span class="w">    </span><span class="n">regionCounter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">regionCounter</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">regionData</span>
<span class="p">}</span>

<span class="k">func</span><span class="w"> </span><span class="n">getRegionAt</span><span class="p">(</span><span class="n">location</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">regions</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">scope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">region</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span>
<span class="p">}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!create region&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">is_op</span><span class="p">(</span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">let</span><span class="w"> </span><span class="n">loc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">player</span><span class="o">.</span><span class="n">location</span>
<span class="w">            </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createRegion</span><span class="p">(</span>
<span class="w">                </span><span class="n">loc</span><span class="o">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="n">loc</span><span class="o">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">loc</span><span class="o">.</span><span class="n">z</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span>
<span class="w">                </span><span class="n">loc</span><span class="o">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="n">loc</span><span class="o">.</span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">loc</span><span class="o">.</span><span class="n">z</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;Region_{regionCounter}&quot;</span>
<span class="w">            </span><span class="p">)</span>

<span class="w">            </span><span class="n">region</span><span class="o">.</span><span class="n">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">player</span><span class="o">.</span><span class="n">name</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Created {region.name}&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!region info&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getRegionAt</span><span class="p">(</span><span class="n">player</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;No region here&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Region: {region.name}&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Owner: {region.owner}&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;PvP: {region.flags.pvp}&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Build: {region.flags.build}&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">BlockPlace</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getRegionAt</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">region</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">build</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">cancel</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Building disabled in {region.name}&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerDamage</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getRegionAt</span><span class="p">(</span><span class="n">damage</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">region</span><span class="o">.</span><span class="n">flags</span><span class="o">.</span><span class="n">pvp</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">damage</span><span class="o">.</span><span class="n">source</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="n">damage</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;player&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">cancel</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
<span class="w">                    </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;PvP disabled in {region.name}&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="teleportation-network">Teleportation Network</h3>
<p><strong>Region-based teleport system:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">teleportPoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nl">spawn</span><span class="p">:</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">scope</span><span class="err">:</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">Scope</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">),</span>
<span class="w">        </span><span class="nl">destination</span><span class="p">:</span><span class="w"> </span><span class="n">location</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="err">}</span><span class="p">,</span>
<span class="w">    </span><span class="nl">shop</span><span class="p">:</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">scope</span><span class="err">:</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">Scope</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">90</span><span class="p">,</span><span class="w"> </span><span class="mi">110</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">110</span><span class="p">),</span>
<span class="w">        </span><span class="nl">destination</span><span class="p">:</span><span class="w"> </span><span class="n">location</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="w">    </span><span class="err">}</span><span class="p">,</span>
<span class="w">    </span><span class="nl">arena</span><span class="p">:</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">scope</span><span class="err">:</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">Scope</span><span class="p">(</span><span class="o">-</span><span class="mi">110</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">190</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">90</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">210</span><span class="p">),</span>
<span class="w">        </span><span class="nl">destination</span><span class="p">:</span><span class="w"> </span><span class="n">location</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">)</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">teleportPoints</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">let</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">teleportPoints</span><span class="o">[</span><span class="n">name</span><span class="o">]</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="k">to</span><span class="p">,</span><span class="w"> </span><span class="n">point</span><span class="p">.</span><span class="k">scope</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="err">!</span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="k">from</span><span class="p">,</span><span class="w"> </span><span class="n">point</span><span class="p">.</span><span class="k">scope</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">                </span><span class="n">teleport</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">point</span><span class="p">.</span><span class="n">destination</span><span class="p">)</span>
<span class="w">                </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Teleported to {name}!&quot;</span><span class="p">)</span>
<span class="w">                </span><span class="n">playsound</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;entity.enderman.teleport&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">)</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="o">//</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">teleport</span><span class="w"> </span><span class="n">command</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;!tp spawn&quot;</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">teleport</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">teleportPoints</span><span class="p">.</span><span class="n">spawn</span><span class="p">.</span><span class="n">destination</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Teleported to spawn&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;!tp shop&quot;</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">teleport</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">teleportPoints</span><span class="p">.</span><span class="n">shop</span><span class="p">.</span><span class="n">destination</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Teleported to shop&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;!tp arena&quot;</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">teleport</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">teleportPoints</span><span class="p">.</span><span class="n">arena</span><span class="p">.</span><span class="n">destination</span><span class="p">)</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Teleported to arena&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</code></pre></div>

<h3 id="area-broadcasting">Area Broadcasting</h3>
<p><strong>Scope-specific announcements:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">zones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">town</span><span class="p">:</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span>
<span class="w">    </span><span class="n">wilderness</span><span class="p">:</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Scope</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">func</span><span class="w"> </span><span class="n">broadcastToZone</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">allPlayers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_online_players</span><span class="p">()</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">player</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">allPlayers</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!announce town&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">is_op</span><span class="p">(</span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">broadcastToZone</span><span class="p">(</span><span class="n">zones</span><span class="o">.</span><span class="n">town</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Town event starting in 5 minutes!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="o">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;!announce wilderness&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">is_op</span><span class="p">(</span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">broadcastToZone</span><span class="p">(</span><span class="n">zones</span><span class="o">.</span><span class="n">wilderness</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Boss spawning nearby!&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Automatic</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="n">broadcasts</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerDeath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="o">.</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">zones</span><span class="o">.</span><span class="n">town</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">broadcastToZone</span><span class="p">(</span><span class="n">zones</span><span class="o">.</span><span class="n">town</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;{player.name} died in town!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="o">.</span><span class="n">location</span><span class="p">,</span><span class="w"> </span><span class="n">zones</span><span class="o">.</span><span class="n">wilderness</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">broadcastToZone</span><span class="p">(</span><span class="n">zones</span><span class="o">.</span><span class="n">wilderness</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;{player.name} died in the wilderness!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="scope-statistics">Scope Statistics</h3>
<p><strong>Track scope usage and events:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">scopeStats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{}</span>

<span class="n">func</span><span class="w"> </span><span class="n">initScopeStats</span><span class="p">(</span><span class="n">scopeName</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">scopeStats</span><span class="o">[</span><span class="n">scopeName</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nl">enters</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nl">exits</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nl">currentPlayers</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="nl">totalPlaytime</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="n">let</span><span class="w"> </span><span class="n">myScope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">Scope</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span>
<span class="n">initScopeStats</span><span class="p">(</span><span class="ss">&quot;myScope&quot;</span><span class="p">)</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Track</span><span class="w"> </span><span class="n">entries</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="k">to</span><span class="p">,</span><span class="w"> </span><span class="n">myScope</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="err">!</span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="k">from</span><span class="p">,</span><span class="w"> </span><span class="n">myScope</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">scopeStats</span><span class="o">[</span><span class="n">&quot;myScope&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">enters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scopeStats</span><span class="o">[</span><span class="n">&quot;myScope&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">enters</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">            </span><span class="n">scopeStats</span><span class="o">[</span><span class="n">&quot;myScope&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">currentPlayers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scopeStats</span><span class="o">[</span><span class="n">&quot;myScope&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">currentPlayers</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>

<span class="w">            </span><span class="n">addtoscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">myScope</span><span class="p">)</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Track</span><span class="w"> </span><span class="n">exits</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="err">!</span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="k">to</span><span class="p">,</span><span class="w"> </span><span class="n">myScope</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="k">from</span><span class="p">,</span><span class="w"> </span><span class="n">myScope</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">scopeStats</span><span class="o">[</span><span class="n">&quot;myScope&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">exits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scopeStats</span><span class="o">[</span><span class="n">&quot;myScope&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">exits</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">            </span><span class="n">scopeStats</span><span class="o">[</span><span class="n">&quot;myScope&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">currentPlayers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scopeStats</span><span class="o">[</span><span class="n">&quot;myScope&quot;</span><span class="o">]</span><span class="p">.</span><span class="n">currentPlayers</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span>

<span class="w">            </span><span class="n">removefromscope</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">myScope</span><span class="p">)</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>

<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerChat</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">chat</span><span class="p">.</span><span class="n">message</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">&quot;!stats&quot;</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">is_op</span><span class="p">(</span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">let</span><span class="w"> </span><span class="n">stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scopeStats</span><span class="o">[</span><span class="n">&quot;myScope&quot;</span><span class="o">]</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;=== Scope Statistics ===&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Total enters: {stats.enters}&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Total exits: {stats.exits}&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;Current players: {stats.currentPlayers}&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</code></pre></div>

<h3 id="performance-notes">Performance Notes</h3>
<p><strong>Best practices for scope functions:</strong></p>
<ol>
<li><strong>Minimize <code>in_region()</code> checks</strong>: These are efficient but calling them excessively can impact performance</li>
<li><strong>Cache region data</strong>: Store region boundaries instead of calling <code>get_region()</code> repeatedly</li>
<li><strong>Batch player operations</strong>: Use <code>getplayers()</code> once and iterate, rather than checking each player individually</li>
<li><strong>Use scope player lists wisely</strong>: Only add/remove players when they actually enter/exit regions</li>
<li><strong>Avoid nested scope checks</strong>: Check outer scopes first before inner scopes</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="c1">// BAD - Checking region every tick</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">zone1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">zone2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">zone3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// GOOD - Only check on position change</span>
<span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Only fires when player moves to different block</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">move</span><span class="p">.</span><span class="n">from</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">move</span><span class="p">.</span><span class="n">to</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>
<span class="w">       </span><span class="nb">move</span><span class="p">.</span><span class="n">from</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">move</span><span class="p">.</span><span class="n">to</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>
<span class="w">       </span><span class="nb">move</span><span class="p">.</span><span class="n">from</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">move</span><span class="p">.</span><span class="n">to</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Now check regions</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="nb">move</span><span class="p">.</span><span class="n">to</span><span class="p">,</span><span class="w"> </span><span class="n">zone1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// GOOD - Cache players list</span>
<span class="n">let</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">getplayers</span><span class="p">(</span><span class="n">myScope</span><span class="p">)</span>
<span class="k">for</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">players</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Announcement&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// GOOD - Use scope player list for tracking</span>
<span class="k">if</span><span class="w"> </span><span class="n">contains</span><span class="p">(</span><span class="n">myScope</span><span class="p">.</span><span class="n">players</span><span class="p">,</span><span class="w"> </span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Player is in scope</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="common-patterns">Common Patterns</h2>
<h3 id="entryexit-detection">Entry/Exit Detection</h3>
<div class="highlight"><pre><span></span><code><span class="n">OnEvent</span><span class="p">(</span><span class="n">PlayerMove</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">wasInside</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">from</span><span class="p">,</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">isInside</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">to</span><span class="p">,</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">wasInside</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">isInside</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Entered</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Entered zone&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">wasInside</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">isInside</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Exited</span>
<span class="w">        </span><span class="n">sendmessage</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Left zone&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="multi-zone-management">Multi-Zone Management</h3>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">zones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">zone1</span><span class="p">,</span><span class="w"> </span><span class="n">zone2</span><span class="p">,</span><span class="w"> </span><span class="n">zone3</span><span class="p">]</span>

<span class="k">func</span><span class="w"> </span><span class="n">getPlayerZone</span><span class="p">(</span><span class="n">player</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">zones</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">in_region</span><span class="p">(</span><span class="n">player</span><span class="p">,</span><span class="w"> </span><span class="n">zone</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">zone</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span>
<span class="p">}</span>

<span class="n">let</span><span class="w"> </span><span class="n">currentZone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getPlayerZone</span><span class="p">(</span><span class="n">player</span><span class="p">)</span>
<span class="k">if</span><span class="w"> </span><span class="n">currentZone</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">something</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">zone</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="region-validation">Region Validation</h3>
<div class="highlight"><pre><span></span><code><span class="k">func</span><span class="w"> </span><span class="n">isValidRegion</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_region</span><span class="p">(</span><span class="n">scope</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="bp">false</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">x2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">x1</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">y1</span>
<span class="w">    </span><span class="n">let</span><span class="w"> </span><span class="n">depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">region</span><span class="o">.</span><span class="n">z1</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">depth</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="p">}</span>
</code></pre></div>

                    <div class="page-meta">
                        <span class="last-modified">Last updated: November 15, 2025</span>
                    </div>
                </article>

                <nav class='toc'><h4>On This Page</h4><ul><li style='margin-left:0px'><a href='#overview'>Overview</a></li><li style='margin-left:0px'><a href='#player-management'>Player Management</a></li><li style='margin-left:20px'><a href='#addtoscope'>addtoscope()</a></li><li style='margin-left:20px'><a href='#removefromscope'>removefromscope()</a></li><li style='margin-left:20px'><a href='#getplayers'>getplayers()</a></li><li style='margin-left:0px'><a href='#region-management'>Region Management</a></li><li style='margin-left:20px'><a href='#in_region'>in_region()</a></li><li style='margin-left:20px'><a href='#get_region'>get_region()</a></li><li style='margin-left:20px'><a href='#set_region'>set_region()</a></li><li style='margin-left:0px'><a href='#scope-properties'>Scope Properties</a></li><li style='margin-left:20px'><a href='#accessing-scope-properties'>Accessing Scope Properties</a></li><li style='margin-left:0px'><a href='#examples'>Examples</a></li><li style='margin-left:20px'><a href='#team-system'>Team System</a></li><li style='margin-left:20px'><a href='#safe-zone-system'>Safe Zone System</a></li><li style='margin-left:20px'><a href='#battle-royale-zone'>Battle Royale Zone</a></li><li style='margin-left:20px'><a href='#dynamic-region-events'>Dynamic Region Events</a></li><li style='margin-left:20px'><a href='#multi-region-player-tracking'>Multi-Region Player Tracking</a></li><li style='margin-left:20px'><a href='#permission-based-scope-access'>Permission-Based Scope Access</a></li><li style='margin-left:20px'><a href='#region-based-game-modes'>Region-Based Game Modes</a></li><li style='margin-left:20px'><a href='#scope-based-inventory-management'>Scope-Based Inventory Management</a></li><li style='margin-left:20px'><a href='#nested-scopes'>Nested Scopes</a></li><li style='margin-left:20px'><a href='#quest-system'>Quest System</a></li><li style='margin-left:20px'><a href='#advanced-region-system'>Advanced Region System</a></li><li style='margin-left:20px'><a href='#teleportation-network'>Teleportation Network</a></li><li style='margin-left:20px'><a href='#area-broadcasting'>Area Broadcasting</a></li><li style='margin-left:20px'><a href='#scope-statistics'>Scope Statistics</a></li><li style='margin-left:20px'><a href='#performance-notes'>Performance Notes</a></li><li style='margin-left:0px'><a href='#common-patterns'>Common Patterns</a></li><li style='margin-left:20px'><a href='#entry/exit-detection'>Entry/Exit Detection</a></li><li style='margin-left:20px'><a href='#multi-zone-management'>Multi-Zone Management</a></li><li style='margin-left:20px'><a href='#region-validation'>Region Validation</a></li></ul></nav>
            </div>

            <footer class="doc-footer">
                <div class="footer-content">
                    <div class="alpha-banner">Quill â€” A sandboxed scripting language for Minecraft event automation</div>
                    <div class="footer-links">
                        <a href="https://github.com/kohanmathers/quill/issues" target="_blank">Report Issue</a>
                        <span class="separator">â€¢</span>
                        <a href="https://github.com/kohanmathers/quill/blob/main/LICENSE" target="_blank">License</a>
                        <span class="separator">â€¢</span>
                        <a href="https://github.com/kohanmathers/quill" target="_blank">Contribute</a>
                    </div>
                </div>
            </footer>
        </main>
    </div>

    <script>
        function createParticles() {
            const particles = document.getElementById('particles');
            const symbols = ['fn', 'let', 'if', '{}', '()', '=>', '[]', '&&', '||', '==', '!='];
            const particleCount = 20;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 10 + 's';
                particle.style.animationDuration = (10 + Math.random() * 10) + 's';
                particles.appendChild(particle);
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            createParticles();

            document.querySelectorAll('.toc a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    const id = entry.target.getAttribute('id');
                    if (entry.isIntersecting) {
                        document.querySelectorAll('.toc a').forEach(link => {
                            link.classList.remove('active');
                        });
                        const activeLink = document.querySelector(`.toc a[href="#${id}"]`);
                        if (activeLink) {
                            activeLink.classList.add('active');
                        }
                    }
                });
            }, { rootMargin: '-20% 0px -80% 0px' });

            document.querySelectorAll('h2[id], h3[id]').forEach(heading => {
                observer.observe(heading);
            });
        });
    </script>
</body>

</html>